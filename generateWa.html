<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>WhatsApp Button Generator (Inline CSS)</title>
</head>
<body style="font-family: Arial, sans-serif; background: #f9f9f9; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; padding: 20px;">

  <div id="container" style="background: #fff; padding: 20px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); width: 100%; max-width: 750px;">
    <h2 style="text-align: center; color: #333; margin-bottom: 15px;">WhatsApp Button Generator</h2>

    <label for="intro" style="font-weight: bold; display: block; margin-top: 10px; margin-bottom: 5px;">Teks Sebelum Tombol:</label>
    <input id="intro" type="text" value="Mau tau detail pre-order?" placeholder="contoh: Mau tau promo terbaru?" style="width: 100%; padding: 10px; border-radius: 8px; border: 1px solid #ccc; margin-bottom: 10px; box-sizing: border-box;">

    <label for="phone" style="font-weight: bold; display: block; margin-top: 10px; margin-bottom: 5px;">Nomor WhatsApp:</label>
    <input id="phone" type="text" value="6285892599688" placeholder="contoh: 628123456789 atau 08123456789" style="width: 100%; padding: 10px; border-radius: 8px; border: 1px solid #ccc; margin-bottom: 10px; box-sizing: border-box;">

    <label for="message" style="font-weight: bold; display: block; margin-top: 10px; margin-bottom: 5px;">Pesan WhatsApp:</label>
    <textarea id="message" rows="3" placeholder="Tulis pesan..." style="width: 100%; padding: 10px; border-radius: 8px; border: 1px solid #ccc; margin-bottom: 10px; box-sizing: border-box;">halo kak, saya mau tanya..</textarea>

    <div style="display: flex; margin-top: 20px; border-bottom: 2px solid #eee; ">
      <div id="tab-code" onclick="openTab('code')" style="flex: 1; text-align: center; padding: 10px; cursor: pointer; font-weight: bold; border-radius: 8px 8px 0 0; background: #4CAF50; color: white;">Code</div>
      <div id="tab-preview" onclick="openTab('preview')" style="flex: 1; text-align: center; padding: 10px; cursor: pointer; font-weight: bold; border-radius: 8px 8px 0 0; background: #f1f1f1;">Preview</div>
    </div>

    <div id="code" style="display:block;">
      <pre id="generatedCode" style="background: #f4f4f4; padding: 12px; border-radius: 8px; border: 1px solid #ddd; overflow-x: auto; white-space: pre-wrap; word-break: break-word; font-size: 13px;"></pre>
      <button onclick="copyCode()" style="padding: 10px 16px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; background: #007BFF; color: white;">Copy Code</button>
    </div>

    <div id="preview" style="display:none;">
      <div id="previewContent" style="padding:8px 0; margin: 25px 0px;"></div>
      <button onclick="copyCode()" style="padding: 10px 16px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; background: #007BFF; color: white;">Copy Code</button>
      <a id="testLink" href="#" target="_blank" style="padding: 10px 16px; border-radius: 8px; cursor: pointer; font-weight: bold; background: #4CAF50; color: white; text-decoration: none; margin-left:8px;">Test Link</a>
    </div>
  </div>

  <script>
    function formatPhone(phone) {
      phone = phone.replace(/\D/g, "");
      if (!phone) return "";
      if (phone.startsWith("0")) return "62" + phone.substring(1);
      if (phone.startsWith("8")) return "62" + phone;
      return phone;
    }

    function escapeHtml(s) {
      return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;");
    }

    function showToast(msg="Copied!") {
      let t=document.getElementById("__toast");
      if(!t){
        t=document.createElement("div");
        t.id="__toast";
        t.setAttribute("style","position:fixed;right:20px;bottom:20px;background:rgba(0,0,0,0.8);color:#fff;padding:10px 14px;border-radius:8px;font-weight:600;z-index:9999;transition:opacity 0.3s;");
        document.body.appendChild(t);
      }
      t.textContent=msg;
      t.style.opacity="1";
      setTimeout(()=>{t.style.opacity="0";},1500);
    }

    function generateLink() {
      const intro = document.getElementById("intro").value.trim();
      let phone = document.getElementById("phone").value.trim();
      let message = document.getElementById("message").value.trim();
      phone = formatPhone(phone || "6285892599688");
      const encodedMessage = encodeURIComponent(message);
      const link = `https://api.whatsapp.com/send/?phone=${phone}&text=${encodedMessage}`;

      const html = `<span>${escapeHtml(intro)} <a href="${link}" target="_blank" style="align-items:center;gap:5px;background-color:#25D366;color:white;font-weight:600;padding:5px 10px;border-radius:5px;text-decoration:none;transition:all 0.2s ease;"><img src='https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg' style='width:20px;height:20px;vertical-align:middle;' alt='WA'>Chat via WhatsApp</a></span>`;

      document.getElementById("generatedCode").textContent = html;
      document.getElementById("previewContent").innerHTML = html;
      document.getElementById("testLink").href = link;
    }

    function copyCode() {
      const code = document.getElementById("generatedCode").textContent;
      navigator.clipboard.writeText(code).then(() => showToast("Code disalin!"));
    }

    function openTab(tabName) {
      const tabCode = document.getElementById("tab-code");
      const tabPreview = document.getElementById("tab-preview");
      if (tabName === "code") {
        document.getElementById("code").style.display = "block";
        document.getElementById("preview").style.display = "none";
        tabCode.style.background = "#4CAF50";
        tabCode.style.color = "white";
        tabPreview.style.background = "#f1f1f1";
        tabPreview.style.color = "black";
      } else {
        document.getElementById("code").style.display = "none";
        document.getElementById("preview").style.display = "block";
        tabPreview.style.background = "#4CAF50";
        tabPreview.style.color = "white";
        tabCode.style.background = "#f1f1f1";
        tabCode.style.color = "black";
      }
    }

    document.querySelectorAll("#intro,#phone,#message").forEach(el => {
      el.addEventListener("input", generateLink);
    });

    generateLink();
  </script>
</body>
</html>
